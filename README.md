# CycleEye Analysis LLM

製造ラインのサイクルタイムデータをAIで自動分析するプロトタイプアプリケーション

## プロジェクト概要

製造現場の生産性向上を目的とした、サイクルタイムデータの可視化・AI分析システムです。別途開発中の**AIによるサイクルタイム自動計測システム**と統合し、データ収集から分析までを**ワンストップ**で自動化することを想定しています。

**このプロトタイプでは**、ダミーデータ（4ゾーン×500サイクル）を使用し、ワンクリックで以下を実行できます：
- 統計分析と異常値検出
- インタラクティブなグラフ表示
- **GPT-4oによる改善提案の自動生成**

## 主要機能

### 1. データ処理・統計分析
- 欠損値・異常値の自動除外
- IQR法とZ-score法による異常値検出（信頼度別）
- ゾーン別の達成率・ばらつき分析

### 2. 可視化（4タイプ）
- 統計表（達成率・ステータス）
- ヒストグラム（目標値線付き）
- 時系列グラフ（目標値線付き）
- 異常値リスト（高/低信頼度別）

### 3. AI分析（OpenAI GPT-4o）
- **ストリーミング表示**でリアルタイム分析
- 問題点の抽出と改善提案を自動生成
- JSON形式でのデータエクスポート

## 技術構成

### アーキテクチャ

```
モジュール化された設計で保守性・拡張性を確保

app/
├── main.py              # アプリケーション制御
├── constants.py         # 定数管理
├── data_processing.py   # データ処理・統計
├── visualizations.py    # グラフ描画
├── llm_handler.py       # OpenAI API連携
└── ui_components.py     # UI表示
```

### 使用技術

| 分野 | 技術 |
|-----|------|
| **フレームワーク** | Streamlit |
| **データ処理** | Pandas, NumPy, SciPy |
| **可視化** | Plotly |
| **AI/LLM** | OpenAI GPT-4o (API) |
| **インフラ** | Docker / Docker Compose |

## デモ実行

### 前提条件
- Docker & Docker Compose
- OpenAI APIキー

### クイックスタート

```bash
# 1. リポジトリをクローン
git clone https://github.com/mztomk/CycleEye_Analysis_LLM.git
cd CycleEye_Analysis_LLM

# 2. 環境変数を設定
cp .env.sample app/.env
# app/.envを編集してOPENAI_API_KEYを記載

# 3. 起動
docker-compose up -d --build

# 4. ブラウザでアクセス
# http://localhost:8501
```

### 使い方

1. サイドバーで各ゾーンの目標値を設定（デフォルト: 5秒）
2. **「🚀 分析を実行」ボタンをクリック**
3. グラフ表示タイプを切り替えて確認
4. AI分析結果を確認

## 開発の背景・想定する統合

### 現状の課題
製造現場では、サイクルタイムの人力計測は人的コスト、正確性の観点から現実的ではない。
ラインの"遅れ"の要因は曖昧かつ多層的で特定が困難。

### 解決アプローチ
1. **AIによる自動計測システム**（別途開発中）でカメラ映像からサイクルタイムを自動抽出
2. 本アプリで統計分析・異常検知・AI提案を自動化
3. データ収集→分析→改善提案までを自動化

## デモデータ仕様

**ダミーデータ**: 4ゾーン（A, A2, B, B2_Assemble）× 500サイクル = 2000行
- サイクルタイム範囲: 4.0~12.5秒
- 各ゾーンで異なる分布特性（実環境を模擬）

## セキュリティ

- APIキーは`.env`ファイルで管理（Git除外）
- Docker環境変数で安全に注入
- Streamlit Cloudデプロイ時はSecrets機能を使用

## 📧 コンタクト

**GitHub**: [@mztomk](https://github.com/mztomk)  
**リポジトリ**: https://github.com/mztomk/CycleEye_Analysis_LLM

---